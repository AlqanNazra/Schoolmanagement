# ğŸ« School Management System (ASP.NET Core + PostgreSQL)

Sistem manajemen sekolah berbasis REST API dengan fitur:
- CRUD untuk Siswa (Murid), Guru, Kelas, dan Pendaftaran
- Autentikasi JWT dengan Role (Admin & Guru)
- PostgreSQL sebagai database (via Supabase / lokal)
- Swagger UI untuk dokumentasi API interaktif

---

## ğŸ“¦ Teknologi

- ASP.NET Core 8
- Entity Framework Core (Npgsql)
- PostgreSQL (support Neon/Supabase)
- JWT Authentication
- Swagger
- BCrypt untuk hashing password

---

## ğŸš€ Cara Menjalankan Secara Lokal

### 1. Clone Repository
```bash
git clone https://github.com/username/school-management-system.git
cd school-management-system
```

### 2. Setup Environment (.env)
Buat file `.env` dan isi:

```env
DB_HOST=localhost
DB_PORT=5432
DB_NAME=school_db
DB_USER=postgres
DB_PASSWORD=password
JWT_KEY=SuperRahasiaDanPanjangBanget12345678!!!
JWT_ISSUER=SchoolSystemAPI
```

Atau langsung isi di `appsettings.json`:

```json
"ConnectionStrings": {
  "DefaultConnection": "Host=localhost;Database=school_db;Username=postgres;Password=yourpassword"
},
"Jwt": {
  "Key": "SuperRahasiaDanPanjangBanget12345678!!!",
  "Issuer": "SchoolSystemAPI"
}
```

### 3. Restore & Run

```bash
dotnet restore
dotnet ef database update
dotnet run
```

### 4. Struktur File

```
/SchoolManagementSystem
â”œâ”€â”€ /Common 
â”‚   â”œâ”€â”€ /Constants 
â”‚   â”œâ”€â”€ /Helpers 
â”‚   â”œâ”€â”€ /Requests 
â”‚   â”œâ”€â”€ /Responses 
â”‚   â”œâ”€â”€ /Utilities 
â”œâ”€â”€ /Modules 
â”‚   â”œâ”€â”€ /Students
â”‚   â”‚   â”œâ”€â”€ StudentController.cs
â”‚   â”‚   â”œâ”€â”€ Dtos/
â”‚   â”‚   â”œâ”€â”€ Entities/
â”‚   â”‚   â”œâ”€â”€ Mappers/
â”‚   â”‚   â”œâ”€â”€ Repositories/
â”‚   â”‚   â””â”€â”€ Services/
â”‚   â”œâ”€â”€ /Teachers
â”‚   â”‚   â”œâ”€â”€ TeacherController.cs
â”‚   â”‚   â”œâ”€â”€ Dtos/
â”‚   â”‚   â”œâ”€â”€ Entities/
â”‚   â”‚   â”œâ”€â”€ Mappers/
â”‚   â”‚   â”œâ”€â”€ Repositories/
â”‚   â”‚   â””â”€â”€ Services/
â”‚   â”œâ”€â”€ /Classes
â”‚   â”œâ”€â”€ /Enrollments
â”‚   â””â”€â”€ /Users (optional for Auth + Roles)
â”œâ”€â”€ /Middlewares
â”‚   â”œâ”€â”€ ExceptionMiddleware.cs
â”‚   â”œâ”€â”€ LoggingMiddleware.cs
â”‚   â””â”€â”€ JwtMiddleware.cs (optional)
â”œâ”€â”€ /Configurations 
â”‚   â”œâ”€â”€ ServiceExtensions.cs
â”‚   â”œâ”€â”€ SwaggerConfig.cs
â”‚   â””â”€â”€ DatabaseConfig.cs
â”œâ”€â”€ Program.cs 
â”œâ”€â”€ appsettings.json 
â”œâ”€â”€ .env 
â””â”€â”€ README.md 
```

### 5. DB Migration & Seeding

```bash
dotnet ef migrations add Init
dotnet ef database update
```

---

## ğŸ“¦ API Endpoints

> ğŸ›¡ = Butuh JWT authentication  (Masih bingung menjalankannya)
> ğŸ”’ = Beberapa service ada role yanda dapat akses ()

### ğŸ§‘â€ğŸ’» Auth (Public)

#### POST `/api/auth/register`
```json
{
  "username": "admin1",
  "password": "rahasia123",
  "role": "Admin"
}
```

#### POST `/api/auth/login`
```json
{
  "username": "admin1",
  "password": "rahasia123"
}
```

âœ”ï¸ Hasil:
```json
{
  "token": "eyJhbGciOi...",
  "username": "admin1",
  "role": "Admin"
}
```

Use this token in headers:
```
Authorization: Bearer <token>
```

---

### ğŸ‘©â€ğŸ« Teachers

> ğŸ›¡ğŸ”’ `Admin`

- `GET /api/teacher`
- `POST /api/teacher`
- `PUT /api/teacher/{id}`
- `DELETE /api/teacher/{id}`

---

### ğŸ‘¨â€ğŸ“ Students

> ğŸ›¡ğŸ”’ `Admin`

- `GET /api/student`
- `POST /api/student`
- `PUT /api/student/{id}`
- `DELETE /api/student/{id}`

---

### ğŸ« Classes

> ğŸ›¡ğŸ”’ `Admin`, `Guru`

- `GET /api/class`
- `POST /api/class`
- `PUT /api/class/{id}`
- `DELETE /api/class/{id}`
- `POST /api/class/assign-teacher`

---

### ğŸ“ Enrollments

> ğŸ›¡ğŸ”’ `Admin`, `Guru`

- `GET /api/enrollment`
- `POST /api/enrollment`
- `DELETE /api/enrollment/{id}`

---

## ğŸ§  Role-Akses Access

| Role   | Akses Endpoint                    |
|--------|-----------------------------------|
| Admin  | Semua                             |
| Guru   | Hanya endpoint tertentu (`kelas`, `murid`) |
| Public | Hanya `/auth/register`, `/auth/login` |

Gunakan `[Authorize(Roles = "Admin")]` atau `[Authorize(Roles = "Guru")]` di controller.

---

## ğŸ§± Database Design (Ringkas)

- `Users (id, username, passwordHash, role)`
- `Murid (id, nama, userId)`
- `Guru (id, nama, userId)`
- `Kelas (id, nama, id_guru)`
- `Pendaftaran (id, id_student, id_kelas)`

---

## ğŸ“¬ Contact

Made with â¤ï¸ by Alqan Ganteng amin
